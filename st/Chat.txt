Blank lines are being deleted now. Good, but...
Did you forget to include the code that fixed the issue about
a task starting with a special character like
`happy`, which isn't a `[high priority]`, it does not start with `h`,
like `h happy`

`happy` is just a `[normal] ` priority

This is an example of this problem:
In Edit tab display is:
`title TITLE`
Then, click on View, 
then, back to Edit and reformatting
t itle TITLE

I think it thinks `t` is a [today],
but it isn't, it just starts with a `t`


Note the same haviour with:
In Edit:
`happy` become
`h appy` in Edit,

In View it is displayed as:
`[high priority] appy`
but,
happy should be a `[normal]` task item, it just starts with `h`
